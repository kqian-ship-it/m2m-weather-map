<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M2M Weather Alert Map - 2026-02-09</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #0f172a; }
        
        #map { width: 100%; height: calc(100vh - 60px); }
        
        .header {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
            border-bottom: 2px solid #334155;
        }
        
        .header h1 {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .header .date {
            font-size: 14px;
            color: #94a3b8;
        }
        
        .legend {
            position: absolute;
            bottom: 30px;
            right: 20px;
            z-index: 1000;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 16px;
            color: white;
            min-width: 200px;
        }
        
        .legend h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #e2e8f0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 6px 0;
            font-size: 13px;
        }
        
        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .stats-panel {
            position: absolute;
            top: 80px;
            left: 20px;
            z-index: 1000;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 16px;
            color: white;
            min-width: 220px;
        }
        
        .stats-panel h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #e2e8f0;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            font-size: 13px;
        }
        
        .stat-row .label {
            color: #94a3b8;
        }
        
        .stat-row .value {
            font-weight: 600;
        }
        
        .stat-row .badge {
            display: inline-block;
            padding: 1px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }
        
        /* Pulsing animation for warning markers */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .warning-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        .pulse-ring {
            animation: pulse-ring 2s ease-out infinite;
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(1); opacity: 0.6; }
            100% { transform: scale(2.5); opacity: 0; }
        }
        
        .leaflet-popup-content-wrapper {
            border-radius: 10px !important;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3) !important;
        }
        
        .mcp-notice {
            position: absolute;
            bottom: 30px;
            left: 20px;
            z-index: 1000;
            background: rgba(234, 179, 8, 0.15);
            border: 1px solid rgba(234, 179, 8, 0.4);
            border-radius: 8px;
            padding: 10px 14px;
            color: #fbbf24;
            font-size: 12px;
            max-width: 280px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            <span>üå°Ô∏è</span>
            Month2Month Weather Alert Map
        </h1>
        <div class="date">Generated: 2026-02-09 UTC | 280 Properties | 30 Regions</div>
    </div>
    
    <div id="map"></div>
    
    <div class="legend">
        <h3>Risk Levels</h3>
        <div class="legend-item">
            <div class="legend-dot" style="background: #dc2626"></div>
            <span>CRITICAL - ÊûÅÁ´ØÈ£éÈô© (0 regions, 0 props)</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #ea580c"></div>
            <span>SEVERE - ‰∏•ÈáçÈ£éÈô© (1 regions, 4 props)</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #eab308"></div>
            <span>MODERATE - ‰∏≠Á≠âÈ£éÈô© (3 regions, 49 props)</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #22c55e"></div>
            <span>LOW - ‰ΩéÈ£éÈô© (26 regions, 227 props)</span>
        </div>
        <div class="legend-item" style="margin-top:8px;padding-top:8px;border-top:1px solid #334155">
            <span>‚ö†Ô∏è</span>
            <span>Warning: MODERATE+ risk region</span>
        </div>
    </div>
    
    <div class="stats-panel">
        <h3>üìä Dashboard Summary</h3>
        <div class="stat-row">
            <span class="label">Total Properties</span>
            <span class="value">280</span>
        </div>
        <div class="stat-row">
            <span class="label">Total Regions</span>
            <span class="value">30</span>
        </div>
        <hr style="border-color:#334155;margin:8px 0">
        <div class="stat-row">
            <span class="label">CRITICAL</span>
            <span class="badge" style="background:#dc2626;color:white">0 regions</span>
        </div>
        <div class="stat-row">
            <span class="label">SEVERE</span>
            <span class="badge" style="background:#ea580c;color:white">1 regions</span>
        </div>
        <div class="stat-row">
            <span class="label">MODERATE</span>
            <span class="badge" style="background:#eab308;color:black">3 regions</span>
        </div>
        <div class="stat-row">
            <span class="label">LOW</span>
            <span class="badge" style="background:#22c55e;color:white">26 regions</span>
        </div>
        <hr style="border-color:#334155;margin:8px 0">
        <div class="stat-row">
            <span class="label">Properties at Risk</span>
            <span class="value" style="color:#fbbf24">53</span>
        </div>
        <div style="margin-top:8px;padding:6px 8px;background:rgba(234,179,8,0.1);border-radius:6px;font-size:11px;color:#fbbf24">
            ‚ö†Ô∏è Vacancy data unavailable<br>
            <span style="color:#94a3b8">m2m-mcp OAuth pending</span>
        </div>
    </div>
    
    <div class="mcp-notice">
        ‚ö†Ô∏è <b>Note:</b> Vacancy classification (Vacant/Occupied) unavailable due to m2m-mcp OAuth timeout. All properties shown without vacancy status.
    </div>
    
    <script>
        var map = L.map('map', {
            center: [37.5, -98.0],
            zoom: 4,
            zoomControl: true,
            attributionControl: true
        });
        
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);
        
        var markers = [{"lat": 33.6846, "lon": -117.8265, "region": "Orange County", "risk": "LOW", "color": "#22c55e", "prop_count": 56, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Orange County</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 56<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 28.417, "lon": -81.5812, "region": "Orlando", "risk": "LOW", "color": "#22c55e", "prop_count": 7, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Orlando</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 7<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 33.9533, "lon": -117.3962, "region": "Riverside", "risk": "LOW", "color": "#22c55e", "prop_count": 21, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Riverside</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 21<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 29.7604, "lon": -95.3698, "region": "Houston", "risk": "LOW", "color": "#22c55e", "prop_count": 15, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Houston</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 15<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 45.5152, "lon": -122.6784, "region": "Portland and Nearby", "risk": "LOW", "color": "#22c55e", "prop_count": 13, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Portland and Nearby</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 13<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 29.4241, "lon": -98.4936, "region": "San Antonio", "risk": "LOW", "color": "#22c55e", "prop_count": 4, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>San Antonio</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 4<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 34.0522, "lon": -118.2437, "region": "Los Angeles and Nearby", "risk": "MODERATE", "color": "#eab308", "prop_count": 41, "alert_count": 1, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>\u26a0\ufe0f Los Angeles and Nearby</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#eab308;color:white;font-weight:bold;font-size:12px\\'>MODERATE - \u4e2d\u7b49\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 41<br>                <b>Active Alerts:</b> 1            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>            <hr style=\\'margin:5px 0\\'><b>Active Alerts:</b><br><div style=\\'margin:3px 0\\'><span style=\\'background:#eab308;color:white;padding:1px 6px;border-radius:3px;font-size:11px\\'>Minor</span> High Surf Advisory</div><div style=\\'font-size:11px;color:#666;margin-left:10px\\'>High Surf Advisory issued February 9 at 1:43AM PST until February 11 at 9:00PM PST by NWS Los Angeles/Oxnard CA</div>        </div>    ", "has_warning": true}, {"lat": 34.1083, "lon": -117.2898, "region": "San Bernardino", "risk": "LOW", "color": "#22c55e", "prop_count": 21, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>San Bernardino</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 21<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 37.3861, "lon": -122.0839, "region": "Bay Area", "risk": "LOW", "color": "#22c55e", "prop_count": 16, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Bay Area</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 16<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 32.7767, "lon": -96.797, "region": "Dallas", "risk": "LOW", "color": "#22c55e", "prop_count": 10, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Dallas</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 10<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 38.5816, "lon": -121.4944, "region": "Sacramento", "risk": "MODERATE", "color": "#eab308", "prop_count": 6, "alert_count": 1, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>\u26a0\ufe0f Sacramento</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#eab308;color:white;font-weight:bold;font-size:12px\\'>MODERATE - \u4e2d\u7b49\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 6<br>                <b>Active Alerts:</b> 1            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>            <hr style=\\'margin:5px 0\\'><b>Active Alerts:</b><br><div style=\\'margin:3px 0\\'><span style=\\'background:#eab308;color:white;padding:1px 6px;border-radius:3px;font-size:11px\\'>Moderate</span> Winter Weather Advisory</div><div style=\\'font-size:11px;color:#666;margin-left:10px\\'>Winter Weather Advisory issued February 8 at 11:54AM PST until February 11 at 4:00PM PST by NWS Sacramento CA</div>        </div>    ", "has_warning": true}, {"lat": 32.7765, "lon": -79.9311, "region": "South Carolina", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>South Carolina</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 32.7157, "lon": -117.1611, "region": "San Diego", "risk": "LOW", "color": "#22c55e", "prop_count": 6, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>San Diego</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 6<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 33.749, "lon": -84.388, "region": "Georgia", "risk": "LOW", "color": "#22c55e", "prop_count": 11, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Georgia</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 11<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 33.4484, "lon": -112.074, "region": "Phoenix and Nearby", "risk": "LOW", "color": "#22c55e", "prop_count": 7, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Phoenix and Nearby</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 7<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 40.015, "lon": -105.2705, "region": "Colorado", "risk": "SEVERE", "color": "#ea580c", "prop_count": 4, "alert_count": 1, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>\u26a0\ufe0f Colorado</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#ea580c;color:white;font-weight:bold;font-size:12px\\'>SEVERE - \u4e25\u91cd\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 4<br>                <b>Active Alerts:</b> 1            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>            <hr style=\\'margin:5px 0\\'><b>Active Alerts:</b><br><div style=\\'margin:3px 0\\'><span style=\\'background:#ea580c;color:white;padding:1px 6px;border-radius:3px;font-size:11px\\'>Severe</span> Red Flag Warning</div><div style=\\'font-size:11px;color:#666;margin-left:10px\\'>Red Flag Warning issued February 8 at 10:55PM MST until February 9 at 5:00PM MST by NWS Denver CO</div>        </div>    ", "has_warning": true}, {"lat": 30.2672, "lon": -97.7431, "region": "Austin and Nearby", "risk": "LOW", "color": "#22c55e", "prop_count": 7, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Austin and Nearby</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 7<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 45.6387, "lon": -122.6615, "region": "Vancouver", "risk": "LOW", "color": "#22c55e", "prop_count": 6, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Vancouver</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 6<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 42.2808, "lon": -87.9497, "region": "Chicago and Nearby", "risk": "LOW", "color": "#22c55e", "prop_count": 3, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Chicago and Nearby</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 3<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 35.3733, "lon": -119.0187, "region": "Bakersfield", "risk": "LOW", "color": "#22c55e", "prop_count": 2, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Bakersfield</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 2<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 47.6062, "lon": -122.3321, "region": "Seattle and Nearby", "risk": "LOW", "color": "#22c55e", "prop_count": 9, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Seattle and Nearby</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 9<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 35.7796, "lon": -78.6382, "region": "North Carolina", "risk": "LOW", "color": "#22c55e", "prop_count": 4, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>North Carolina</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 4<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 39.7684, "lon": -86.1581, "region": "Indiana", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Indiana</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 39.6837, "lon": -75.7497, "region": "Delaware", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Delaware</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 40.764, "lon": -74.1284, "region": "New Jersey", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>New Jersey</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 42.167, "lon": -83.7816, "region": "Michigan", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Michigan</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 39.4143, "lon": -77.4105, "region": "Maryland", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Maryland</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 36.1699, "lon": -115.1398, "region": "Las Vegas", "risk": "MODERATE", "color": "#eab308", "prop_count": 2, "alert_count": 1, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>\u26a0\ufe0f Las Vegas</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#eab308;color:white;font-weight:bold;font-size:12px\\'>MODERATE - \u4e2d\u7b49\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 2<br>                <b>Active Alerts:</b> 1            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>            <hr style=\\'margin:5px 0\\'><b>Active Alerts:</b><br><div style=\\'margin:3px 0\\'><span style=\\'background:#eab308;color:white;padding:1px 6px;border-radius:3px;font-size:11px\\'>Moderate</span> Lake Wind Advisory</div><div style=\\'font-size:11px;color:#666;margin-left:10px\\'>Lake Wind Advisory issued February 8 at 11:04PM PST until February 10 at 10:00PM PST by NWS Las Vegas NV</div>        </div>    ", "has_warning": true}, {"lat": 43.6532, "lon": -79.3832, "region": "Toronto", "risk": "LOW", "color": "#22c55e", "prop_count": 1, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Toronto</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 1<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}, {"lat": 44.9778, "lon": -93.265, "region": "Minnesota", "risk": "LOW", "color": "#22c55e", "prop_count": 2, "alert_count": 0, "popup": "        <div style=\\'min-width:220px;font-family:Arial,sans-serif\\'>            <h3 style=\\'margin:0 0 8px 0;color:#1a1a1a\\'>Minnesota</h3>            <div style=\\'display:inline-block;padding:2px 10px;border-radius:12px;background:#22c55e;color:white;font-weight:bold;font-size:12px\\'>LOW - \u4f4e\u98ce\u9669</div>            <div style=\\'margin-top:8px\\'>                <b>Properties:</b> 2<br>                <b>Active Alerts:</b> 0            </div>            <div style=\\'margin-top:5px;padding:4px 8px;background:#fff3cd;border-radius:4px;font-size:11px\\'>\u26a0\ufe0f Vacancy data unavailable (MCP auth pending)</div>                    </div>    ", "has_warning": false}];
        
        markers.forEach(function(m) {
            // Add pulsing ring for warning regions
            if (m.has_warning) {
                var pulseIcon = L.divIcon({
                    className: '',
                    html: '<div style="width:40px;height:40px;position:relative"><div class="pulse-ring" style="position:absolute;width:40px;height:40px;border-radius:50%;border:3px solid ' + m.color + ';"></div></div>',
                    iconSize: [40, 40],
                    iconAnchor: [20, 20]
                });
                L.marker([m.lat, m.lon], {icon: pulseIcon}).addTo(map);
            }
            
            // Main circle marker
            var radius = Math.max(8, Math.min(20, m.prop_count / 3 + 6));
            var circle = L.circleMarker([m.lat, m.lon], {
                radius: radius,
                fillColor: m.color,
                color: '#fff',
                weight: 2,
                opacity: 0.9,
                fillOpacity: 0.8
            }).addTo(map);
            
            circle.bindPopup(m.popup, {maxWidth: 320});
            
            // Add warning icon label for MODERATE+ regions
            if (m.has_warning) {
                var warningIcon = L.divIcon({
                    className: 'warning-pulse',
                    html: '<div style="font-size:20px;text-shadow:0 0 6px rgba(0,0,0,0.8)">‚ö†Ô∏è</div>',
                    iconSize: [24, 24],
                    iconAnchor: [-4, 28]
                });
                L.marker([m.lat, m.lon], {icon: warningIcon}).addTo(map);
            }
            
            // Region name label
            var labelHtml = '<div style="color:white;font-size:11px;font-weight:600;text-shadow:0 1px 4px rgba(0,0,0,0.9);white-space:nowrap">' + m.region + ' (' + m.prop_count + ')</div>';
            var labelIcon = L.divIcon({
                className: '',
                html: labelHtml,
                iconSize: [150, 20],
                iconAnchor: [75, -12]
            });
            L.marker([m.lat, m.lon], {icon: labelIcon}).addTo(map);
        });
    </script>
</body>
</html>